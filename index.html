<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="description" content="Plane Deinen eigenen Staatshaushalt!">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="icon" href="/favicon-32x32.png" type="image/png" sizes="32x32">
  <link rel="icon" href="/favicon-16x16.png" type="image/png" sizes="16x16">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="theme-color" content="#FFFFFF" media="(prefers-color-scheme: light)">
  <meta name="theme-color" content="#000000" media="(prefers-color-scheme: dark)">
  <title>Haushaltsplaner</title>
</head>

<body>
  <div id="app" x-data="main">

    <div class="navbar sticky bg-base-100 fixed w-full z-20 top-0 start-0 shadow-xl">
      <div class="mx-auto md:mx-0">
        <button class="btn flex-row" @click="document.getElementById('startup').showModal()">
          <span class="iconify akar-icons--info"></span>
          <span>Anleitung+Infos</span>
        </button>
      </div>
    </div>
    <span x-init="mount($el,'startup')">
    </span>
    <span x-init="mount($el,'bremse')">
    </span>
    <span x-init="mount($el,'schulden')">
    </span>
    <div class="grid grid-row grid-cols-1 md:grid-cols-5 w-full mb-10">
      <div class="flex flex-wrap justify-center mt-10 grow-3 col-span-3 mr-0">
        <template x-for="(r, ri) in ressorts">
          <div class="card bg-base-100 w-96 shadow-xl px-5 py-10 items-center col-span-1 m-8 place-items-center">
            <span x-init="r.mount_dialog($el)"></span>
            <p class="mb-5 font-bold text-lg" x-text="r.name">
            </p>
            <template x-if="r.sliders=='default'">
              <div>
                <input x-model.number="r.cost" type="range" min="0" :max="r.max" value="50" class="range"> </input>
                <div class="badge mt-5">
                  <p x-text="r.cost" class=""></p>
                  <span class="iconify iconoir--coins" style="width: 24px; height: 24px;"></span>
                </div>
                <span x-init="watch_slider(r, ri)"></span>
              </div>
            </template>
            <template x-if="r.sliders=='rente'">
              <div>
                <div class="join-vertical">

                  <span class="join-item">Rentenbeitrag</span>
                  <input x-model.number="r.a" type="range" min="0" max="100" value="50" class="range join-item">
                  </input>
                </div>
                <div class="join-vertical">
                  <span class="join-item">Rentensatz</span>
                  <progress x-model.number="r.c" type="range" :max="r.max+100" value="50" class="progress join-item">
                  </progress>
                </div>
                <div class="join-vertical">
                  <span class="join-item">Staatszuschuss</span>
                  <input x-model.number="r.cost" type="range" min="0" :max="r.max" value="50" class="range join-item">
                  </input>
                </div>
                <div class="badge mt-5">
                  <p x-text="r.cost" class=""></p>
                  <span class="iconify iconoir--coins" style="width: 24px; height: 24px;"></span>
                </div>
                <span x-init="watch_slider(r, ri)"></span>
              </div>
            </template>
            <button class="btn" @click="r.dialog.showModal()"><span class="iconify akar-icons--info"
                style="width: 24px; height: 24px;"></span>Info</button>
          </div>
        </template>
      </div>

      <div class="flex xl:flex-row flex-col col-span-2">
        <div class="flex flex-col grid-row py-10 xl:grow">
          <template x-for="reaction in groups.flatMap(el=>el.shown_reactions)">
            <div class="chat chat-start">
              <div class="chat-image">
                <span :class="groups[reaction.group].icon"></span>
              </div>
              <div class="chat-bubble mt-2 w-full">
                <span x-text="reaction.text"></span>
              </div>
            </div>
          </template>
        </div>
        <div class="shadow-xl md:mr-3 pr-4 pt-10 grid grid-cols-1 gap-1 w-full pl-0 h-fit mb-20">
          <template x-for="group in groups">
            <div class="indicator w-full grid-row h-fit my-0 w-full">
              <div
                class="container border-gray-200 bg-base-100 text-base-content rounded-badge border align-center justify-center flex flex-col text-wrap p-4 h-fit w-full  text-wrap ">
                <span :class="group.icon + ' flex-none'" style="width: 24px; height: 24px;"></span>
                <span x-text="group.name" class="text-xs shrink"></span>
              </div>
              <template x-if="group.shown_reactions.length>0">
                <span class="indicator-item badge badge-error p-2" x-text="group.shown_reactions.length"></span>
              </template>
              <template x-if="group.shown_reactions.length==0">
                <span class="indicator-item badge badge-success p-2" x-text="group.shown_reactions.length"></span>
              </template>
            </div>

          </template>
        </div>

      </div>
    </div>
    <div
      class="stats shadow fixed md:sticky md:bottom-10 bottom-0 left-1/2 transform -translate-x-1/2 md:w-fit w-screen z-10">
      <div class="stat place-items-center">
        <div class="stat-title">Ausgaben</div>
        <div class="stat-value" x-text="spend"></div>
        <div class="stat-desc">Von 500</div>
      </div>
      <div class="stat place-items-center">
        <div class="stat-title">
          Schulden

        </div>
        <div class="stat-value inline">
          <span :class="debt > 0 ? 'text-red-500' : 'text-green-500'" x-text="debt">
          </span>
          <span class="iconify akar-icons--info" @click="show('schulden')"></span>
        </div>

        <div class="stat-desc"></div>
      </div>
      <div class="stat place-items-center">
        <div class="stat-title text-wrap ">
          Schuldenbremse
        </div>
        <div class="stat-value">
          <input x-model.boolean="schulden_bremse" :disabled="!allow_bremse" type="checkbox" class="toggle toggle-lg">
          </input>

          <span class="iconify akar-icons--info" @click="show('bremse')"></span>
        </div>
        <div class="stat-desc flex">
          <button @click="bremse_type='eu'" class="iconify-color circle-flags--eu mr-5 border-accent rounded-full"
            :class="bremse_type=='eu'?'border-2':''" style="width: 24px; height: 24px;"></button>
          <button @click="bremse_type='de'" class="iconify-color circle-flags--de border-accent rounded-full"
            :class="bremse_type=='de'?'border-2':''" style="width: 24px; height: 24px;"></button>
        </div>
      </div>

    </div>
    <script type="module" src="/src/main.ts"></script>
</body>

</html>
